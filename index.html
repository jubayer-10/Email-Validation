<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script
      src="https://kit.fontawesome.com/7488918404.js"
      crossorigin="anonymous"
    ></script>
    <link rel="stylesheet" href="./css/tailwind.css" />
    <title>Document</title>
  </head>
  <body class="h-screen bg-blue-500 flex items-center justify-center">
    <div
      class="w-11/12 sm:w-[400px] bg-white p-5 font-poppins rounded-md shadow-xl"
    >
      <h1
        class="text-3xl font-semibold relative after:absolute after:w-6 after:h-1 after:bg-blue-500 after:bottom-0 after:left-0"
      >
        Login
      </h1>
      <form action="#" class="flex flex-col gap-5 mt-8">
        <div>
          <p class="block mb-1 text-slate-700 text-sm font-medium">Email</p>
          <div>
            <input
              id="email"
              type="email"
              class="w-full h-14 border outline-none rounded-md text-slate-700 px-3 sm:p-5"
              placeholder="Enter email address"
            />
          </div>
          <div id="error" class="hidden">
            <span class="flex items-center gap-2 mt-2">
              <div class="w-3 fill-red-600">
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  id="Outline"
                  viewBox="0 0 24 24"
                >
                  <path
                    d="M12,0A12,12,0,1,0,24,12,12.013,12.013,0,0,0,12,0Zm0,22A10,10,0,1,1,22,12,10.011,10.011,0,0,1,12,22Z"
                  />
                  <path
                    d="M12,5a1,1,0,0,0-1,1v8a1,1,0,0,0,2,0V6A1,1,0,0,0,12,5Z"
                  />
                  <rect x="11" y="17" width="2" height="2" rx="1" />
                </svg>
              </div>
              <p class="text-sm text-red-600">Invalid email address</p>
            </span>
          </div>
        </div>

        <div>
          <p class="block mb-1 text-slate-700 text-sm font-medium">
            Create Password
          </p>
          <div class="relative h-14">
            <input
              id="create_pw"
              type="password"
              class="w-full h-full border outline-none rounded-md text-slate-700 px-3 sm:p-5"
              placeholder="Enter email address"
            />
          </div>
          <div id="error" class="hidden">
            <span class="flex items-start gap-2 mt-2">
              <div class="w-3 fill-red-600 mt-1.5">
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  id="Outline"
                  viewBox="0 0 24 24"
                >
                  <path
                    d="M12,0A12,12,0,1,0,24,12,12.013,12.013,0,0,0,12,0Zm0,22A10,10,0,1,1,22,12,10.011,10.011,0,0,1,12,22Z"
                  />
                  <path
                    d="M12,5a1,1,0,0,0-1,1v8a1,1,0,0,0,2,0V6A1,1,0,0,0,12,5Z"
                  />
                  <rect x="11" y="17" width="2" height="2" rx="1" />
                </svg>
              </div>
              <p class="text-sm text-red-600">
                password must be at least 8 characters long, <br />
                contain at least one number
              </p>
            </span>
          </div>
        </div>

        <div>
          <p class="block mb-1 text-slate-700 text-sm font-medium">
            Confirm Password
          </p>
          <div class="relative h-14">
            <input
              id="confirm_pw"
              type="password"
              class="w-full h-full border outline-none rounded-md text-slate-700 px-3 sm:p-5"
              placeholder="Enter email address"
            />
            <i
              id="eyeIcon"
              class="fa-regular fa-eye-slash absolute cursor-pointer w-7 h-7 flex items-center justify-center rounded-full hover:bg-slate-100 top-1/2 -translate-y-1/2 right-3 sm:right-5 text-zinc-500"
            ></i>
          </div>
          <div id="error" class="hidden">
            <span class="flex items-start gap-2 mt-2">
              <div class="w-3 fill-red-600 mt-1">
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  id="Outline"
                  viewBox="0 0 24 24"
                >
                  <path
                    d="M12,0A12,12,0,1,0,24,12,12.013,12.013,0,0,0,12,0Zm0,22A10,10,0,1,1,22,12,10.011,10.011,0,0,1,12,22Z"
                  />
                  <path
                    d="M12,5a1,1,0,0,0-1,1v8a1,1,0,0,0,2,0V6A1,1,0,0,0,12,5Z"
                  />
                  <rect x="11" y="17" width="2" height="2" rx="1" />
                </svg>
              </div>
              <p class="text-sm text-red-600">
                Password and confirm password does <br />
                not match
              </p>
            </span>
          </div>
        </div>

        <button
          id="submit"
          class="bg-blue-500 text-white h-14 font-medium text-lg"
        >
          Regestration
        </button>
      </form>
    </div>
    <script>
      const form = document.querySelector("form"),
        email = form.querySelector("#email"),
        create_pw = form.querySelector("#create_pw"),
        confirm_pw = form.querySelector("#confirm_pw"),
        eyeIcon = form.querySelector("#eyeIcon"),
        submit = form.querySelector("#submit"),
        error = form.querySelectorAll("#error");

      eyeIcon.addEventListener("click", function () {
        if (create_pw.type === "password" && confirm_pw.type === "password") {
          create_pw.type = "text";
          confirm_pw.type = "text";
          eyeIcon.classList.replace("fa-eye-slash", "fa-eye");
        } else {
          create_pw.type = "password";
          confirm_pw.type = "password";
          eyeIcon.classList.replace("fa-eye", "fa-eye-slash");
        }
      });

      function checkEmail() {
        const pattern = /^[^ ]+@[^ ]+\.[a-z]{2,3}$/;
        if (!email.value.match(pattern)) {
          return error[0].classList.replace("hidden", "block");
        } else {
          error[0].classList.replace("block", "hidden");
        }
      }
      function createPassword() {
        // const passPattern = /^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]{8,}$/ ;
        const count = 8;

        if (create_pw.value.length < count) {
          return error[1].classList.replace("hidden", "block");
        } else {
          error[1].classList.replace("block", "hidden");
        }
      }

      function confirmPassword() {
        if (create_pw.value !== confirm_pw.value || confirm_pw.value === "") {
          return error[2].classList.replace("hidden", "block");
        } else {
          error[2].classList.replace("block", "hidden");
        }
      }

      form.addEventListener("submit", function (e) {
        e.preventDefault();
        checkEmail();
        createPassword();
        confirmPassword();

        email.addEventListener("keyup", checkEmail);
        create_pw.addEventListener("keyup", createPassword);
        confirm_pw.addEventListener("keyup", confirmPassword);
      });
    </script>
  </body>
</html>
